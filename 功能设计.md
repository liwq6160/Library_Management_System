# 基于SpringBoot的图书信息管理系统功能设计

# 数据库设计

## 用户表（users）

| 字段 | 类型 | 大小 | 说明 |
|------|------|------|------|
| id | BIGINT | - | 主键，自增 |
| username | VARCHAR | 50 | 用户名，唯一 |
| password | VARCHAR | 255 | 密码，加密存储 |
| real_name | VARCHAR | 50 | 真实姓名 |
| phone | VARCHAR | 20 | 手机号码 |
| email | VARCHAR | 100 | 邮箱地址 |
| role | VARCHAR | 20 | 角色：admin管理员，user普通用户 |
| status | INT | - | 状态：0禁用，1启用 |
| create_time | DATETIME | - | 创建时间 |
| update_time | DATETIME | - | 更新时间 |

## 图书分类表（book_categories）

| 字段 | 类型 | 大小 | 说明 |
|------|------|------|------|
| id | BIGINT | - | 主键，自增 |
| category_name | VARCHAR | 50 | 分类名称 |
| description | VARCHAR | 200 | 分类描述 |
| sort_order | INT | - | 排序顺序 |
| create_time | DATETIME | - | 创建时间 |
| update_time | DATETIME | - | 更新时间 |

## 图书表（books）

| 字段 | 类型 | 大小 | 说明 |
|------|------|------|------|
| id | BIGINT | - | 主键，自增 |
| book_name | VARCHAR | 100 | 图书名称 |
| author | VARCHAR | 50 | 作者 |
| publisher | VARCHAR | 100 | 出版社 |
| isbn | VARCHAR | 50 | ISBN编号 |
| category_id | BIGINT | - | 分类ID，外键关联book_categories |
| total_count | INT | - | 馆藏总数 |
| available_count | INT | - | 可借数量 |
| price | DECIMAL | 10,2 | 价格 |
| publish_date | DATE | - | 出版日期 |
| cover_image | VARCHAR | 255 | 封面图片路径 |
| description | TEXT | - | 图书简介 |
| status | INT | - | 状态：0下架，1上架 |
| create_time | DATETIME | - | 创建时间 |
| update_time | DATETIME | - | 更新时间 |

## 借阅记录表（borrow_records）

| 字段 | 类型 | 大小 | 说明 |
|------|------|------|------|
| id | BIGINT | - | 主键，自增 |
| user_id | BIGINT | - | 用户ID，外键关联users |
| book_id | BIGINT | - | 图书ID，外键关联books |
| borrow_date | DATETIME | - | 借阅日期 |
| due_date | DATETIME | - | 应还日期 |
| return_date | DATETIME | - | 实际归还日期，未归还为NULL |
| renew_count | INT | - | 续借次数 |
| overdue_days | INT | - | 逾期天数 |
| status | VARCHAR | 20 | 状态：borrowing借阅中，returned已归还，overdue已逾期 |
| create_time | DATETIME | - | 创建时间 |
| update_time | DATETIME | - | 更新时间 |

## 预约记录表（reservation_records）

| 字段 | 类型 | 大小 | 说明 |
|------|------|------|------|
| id | BIGINT | - | 主键，自增 |
| user_id | BIGINT | - | 用户ID，外键关联users |
| book_id | BIGINT | - | 图书ID，外键关联books |
| reservation_date | DATETIME | - | 预约日期 |
| status | VARCHAR | 20 | 状态：pending待审核，approved已通过，cancelled已取消，completed已完成 |
| remark | VARCHAR | 200 | 备注信息 |
| create_time | DATETIME | - | 创建时间 |
| update_time | DATETIME | - | 更新时间 |

## 公告表（announcements）

| 字段 | 类型 | 大小 | 说明 |
|------|------|------|------|
| id | BIGINT | - | 主键，自增 |
| title | VARCHAR | 200 | 公告标题 |
| content | TEXT | - | 公告内容 |
| is_top | INT | - | 是否置顶：0否，1是 |
| publish_user_id | BIGINT | - | 发布人ID，外键关联users |
| status | INT | - | 状态：0草稿，1已发布 |
| create_time | DATETIME | - | 创建时间 |
| update_time | DATETIME | - | 更新时间 |

# 用户管理模块

## API设计

| 端点 | 方法 | 描述 |
|------|------|------|
| /api/users/register | POST | 用户注册 |
| /api/users/login | POST | 用户登录 |
| /api/users/logout | POST | 用户登出 |
| /api/users/profile | GET | 获取个人信息 |
| /api/users/profile | PUT | 修改个人信息 |
| /api/users/password | PUT | 修改密码 |
| /api/users/list | GET | 获取用户列表（管理员） |
| /api/users/{id} | GET | 获取用户详情（管理员） |
| /api/users/{id} | PUT | 修改用户信息（管理员） |
| /api/users/{id}/status | PUT | 修改用户状态（管理员） |

## 后端设计

1. 用户注册功能：验证用户名唯一性，密码加密存储，默认角色为普通用户，发送注册成功响应
2. 用户登录功能：验证用户名密码，生成JWT令牌，返回用户信息和令牌
3. 用户登出功能：清除会话信息，使令牌失效
4. 个人信息查询功能：根据当前登录用户ID获取个人详细信息
5. 个人信息修改功能：允许用户修改真实姓名、手机号、邮箱等信息，验证数据合法性
6. 密码修改功能：验证原密码，对新密码进行加密后更新
7. 用户列表查询功能：分页查询所有用户信息，支持按用户名、真实姓名、角色筛选
8. 用户详情查询功能：管理员根据用户ID获取指定用户的详细信息
9. 用户信息修改功能：管理员修改指定用户的基本信息和角色
10. 用户状态管理功能：管理员启用或禁用指定用户账号

## 前端设计

1. 注册页面：包含用户名、密码、确认密码、真实姓名、手机号、邮箱输入框，表单验证，提交注册请求
2. 登录页面：包含用户名、密码输入框，记住密码选项，登录按钮，跳转注册链接
3. 个人中心页面：展示当前用户的基本信息，提供编辑入口
4. 个人信息编辑页面：可编辑的表单展示个人信息，保存修改功能
5. 密码修改页面：原密码、新密码、确认新密码输入框，表单验证，提交修改
6. 用户管理页面（管理员）：用户列表表格展示，搜索筛选功能，分页功能，启用禁用操作按钮
7. 用户详情弹窗（管理员）：查看用户详细信息，编辑用户信息功能

# 图书管理模块

## API设计

| 端点 | 方法 | 描述 |
|------|------|------|
| /api/books | POST | 添加图书（管理员） |
| /api/books | GET | 获取图书列表 |
| /api/books/{id} | GET | 获取图书详情 |
| /api/books/{id} | PUT | 修改图书信息（管理员） |
| /api/books/{id} | DELETE | 删除图书（管理员） |
| /api/books/search | GET | 搜索图书 |
| /api/categories | POST | 添加分类（管理员） |
| /api/categories | GET | 获取分类列表 |
| /api/categories/{id} | PUT | 修改分类（管理员） |
| /api/categories/{id} | DELETE | 删除分类（管理员） |

## 后端设计

1. 图书信息录入功能：验证图书信息完整性，检查ISBN唯一性，保存图书信息和封面图片，初始化库存数量
2. 图书列表查询功能：分页查询图书列表，返回图书基本信息，支持按分类筛选，支持按状态筛选
3. 图书详情查询功能：根据图书ID获取完整的图书信息，包含分类信息和当前库存状态
4. 图书信息修改功能：验证图书信息，更新图书详细信息，更新封面图片
5. 图书删除功能：检查是否存在借阅记录，软删除图书信息或修改状态为下架
6. 图书搜索功能：支持按书名、作者、出版社、ISBN模糊搜索，支持组合条件查询，返回匹配结果列表
7. 分类添加功能：验证分类名称唯一性，保存分类信息
8. 分类列表查询功能：查询所有分类信息，按排序顺序返回
9. 分类修改功能：更新分类名称和描述信息
10. 分类删除功能：检查是否有图书关联该分类，确认后删除分类

## 前端设计

1. 首页图书展示：图书列表卡片展示，包含封面、书名、作者、可借状态，分页加载
2. 图书搜索栏：搜索输入框，支持选择搜索类型（书名、作者等），搜索按钮
3. 图书详情页：展示图书完整信息，包含封面、书名、作者、出版社、ISBN、库存状态、简介等，提供借阅和预约按钮
4. 图书管理页面（管理员）：图书列表表格展示，搜索筛选功能，添加、编辑、删除操作按钮
5. 图书添加编辑表单（管理员）：图书信息录入表单，封面图片上传，分类选择下拉框，表单验证
6. 分类管理页面（管理员）：分类列表表格展示，添加、编辑、删除操作按钮
7. 分类添加编辑弹窗（管理员）：分类名称、描述、排序输入框

# 借阅管理模块

## API设计

| 端点 | 方法 | 描述 |
|------|------|------|
| /api/borrows | POST | 借阅图书 |
| /api/borrows/{id}/return | PUT | 归还图书 |
| /api/borrows/{id}/renew | PUT | 续借图书 |
| /api/borrows/my | GET | 获取我的借阅记录 |
| /api/borrows | GET | 获取所有借阅记录（管理员） |
| /api/borrows/{id} | GET | 获取借阅详情 |
| /api/borrows/overdue | GET | 获取逾期记录（管理员） |
| /api/borrows/statistics | GET | 获取借阅统计数据（管理员） |

## 后端设计

1. 图书借阅功能：验证用户借阅资格，检查图书库存数量，创建借阅记录，减少图书可借数量，设置借阅日期和应还日期
2. 图书归还功能：验证借阅记录存在性，更新归还日期，计算逾期天数，增加图书可借数量，更新借阅状态为已归还
3. 续借申请功能：验证续借资格（未逾期、续借次数限制），延长应还日期，增加续借次数
4. 个人借阅记录查询功能：根据当前用户ID查询借阅记录，分页展示，支持按状态筛选
5. 借阅记录管理功能：管理员查询所有借阅记录，支持按用户、图书、状态筛选，分页展示
6. 借阅详情查询功能：获取指定借阅记录的详细信息，包含用户信息和图书信息
7. 逾期记录查询功能：查询所有逾期未还的借阅记录，计算逾期天数，按逾期时间排序
8. 借阅统计功能：统计总借阅量、当前借阅中数量、逾期数量等数据
9. 定时任务处理：每日自动更新逾期记录的逾期天数和状态

## 前端设计

1. 图书借阅确认弹窗：展示图书信息和借阅规则，确认借阅按钮
2. 我的借阅页面：借阅记录列表展示，包含图书信息、借阅日期、应还日期、状态，提供归还和续借按钮
3. 借阅详情页：展示借阅记录详细信息，包含图书详情、借还日期、续借记录、逾期情况
4. 借阅记录管理页面（管理员）：所有用户借阅记录列表表格，搜索筛选功能，查看详情按钮
5. 逾期记录页面（管理员）：逾期记录列表表格，高亮显示逾期天数，支持催还操作
6. 借阅统计面板（管理员）：数据卡片展示各项统计数据，图表展示借阅趋势

# 预约管理模块

## API设计

| 端点 | 方法 | 描述 |
|------|------|------|
| /api/reservations | POST | 预约图书 |
| /api/reservations/{id}/cancel | PUT | 取消预约 |
| /api/reservations/my | GET | 获取我的预约记录 |
| /api/reservations | GET | 获取所有预约记录（管理员） |
| /api/reservations/{id} | GET | 获取预约详情 |
| /api/reservations/{id}/approve | PUT | 审核通过预约（管理员） |
| /api/reservations/{id}/reject | PUT | 拒绝预约（管理员） |

## 后端设计

1. 图书预约功能：验证图书是否可预约（已借出状态），检查用户是否已预约该图书，创建预约记录，状态设为待审核
2. 预约取消功能：验证预约记录归属，检查预约状态是否可取消，更新预约状态为已取消
3. 个人预约记录查询功能：根据当前用户ID查询预约记录，分页展示，支持按状态筛选
4. 预约记录管理功能：管理员查询所有预约记录，支持按用户、图书、状态筛选，分页展示
5. 预约详情查询功能：获取指定预约记录的详细信息，包含用户信息和图书信息
6. 预约审核通过功能：管理员审核预约申请，更新预约状态为已通过，记录审核信息
7. 预约拒绝功能：管理员拒绝预约申请，更新预约状态为已取消，填写拒绝原因
8. 预约通知记录功能：图书归还后自动更新相关预约记录状态，记录可借通知信息

## 前端设计

1. 图书预约按钮：图书详情页预约按钮，点击弹出预约确认弹窗
2. 预约确认弹窗：展示图书信息和预约说明，填写预约备注，确认预约按钮
3. 我的预约页面：预约记录列表展示，包含图书信息、预约日期、状态，提供取消预约按钮
4. 预约详情页：展示预约记录详细信息，包含图书详情、预约时间、审核状态、备注信息
5. 预约管理页面（管理员）：所有用户预约记录列表表格，搜索筛选功能，审核操作按钮
6. 预约审核弹窗（管理员）：显示预约详情，通过和拒绝按钮，填写审核意见

# 公告管理模块

## API设计

| 端点 | 方法 | 描述 |
|------|------|------|
| /api/announcements | POST | 发布公告（管理员） |
| /api/announcements | GET | 获取公告列表 |
| /api/announcements/{id} | GET | 获取公告详情 |
| /api/announcements/{id} | PUT | 修改公告（管理员） |
| /api/announcements/{id} | DELETE | 删除公告（管理员） |
| /api/announcements/{id}/top | PUT | 置顶公告（管理员） |
| /api/announcements/{id}/untop | PUT | 取消置顶（管理员） |

## 后端设计

1. 公告发布功能：验证公告标题和内容不为空，保存公告信息，记录发布人ID，设置发布状态
2. 公告列表查询功能：分页查询已发布公告列表，置顶公告排在前面，按发布时间倒序排列
3. 公告详情查询功能：根据公告ID获取完整公告内容和发布人信息
4. 公告修改功能：验证管理员权限，更新公告标题和内容，更新时间
5. 公告删除功能：验证管理员权限，删除指定公告记录
6. 公告置顶功能：设置公告的置顶标记为是，取消其他公告的置顶状态（可选）
7. 取消置顶功能：设置公告的置顶标记为否

## 前端设计

1. 首页公告栏：展示最新公告列表，置顶公告带标识，点击查看详情
2. 公告详情页：展示公告标题、发布时间、发布人、完整内容
3. 公告列表页：分页展示所有公告，置顶标识，搜索功能
4. 公告管理页面（管理员）：公告列表表格展示，添加、编辑、删除、置顶操作按钮
5. 公告发布编辑页面（管理员）：标题输入框，富文本编辑器输入内容，保存和发布按钮
6. 公告置顶操作：列表页置顶按钮，置顶后显示取消置顶按钮
